

<!DOCTYPE html>
<html lang="en">
  <head>
    <title>JSON Views — Tooltwist</title>
    <meta charset="utf-8">
    <meta name="description" content="Tooltwist - A Web Development Platform">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

    <link rel="alternate" hreflang="x-default" href="https://vuejs.org/v2/server/json.html">
    <link rel="alternate" hreflang="zh" href="https://cn.vuejs.org/v2/server/json.html">
    <link rel="alternate" hreflang="ja" href="https://jp.vuejs.org/v2/server/json.html">
    <link rel="alternate" hreflang="ru" href="https://ru.vuejs.org/v2/server/json.html">
    <link rel="alternate" hreflang="ko" href="https://kr.vuejs.org/v2/server/json.html">
    <link rel="alternate" hreflang="pt-BR" href="https://br.vuejs.org/v2/server/json.html">
    <link rel="alternate" hreflang="fr" href="https://fr.vuejs.org/v2/server/json.html">

    <meta property="og:type" content="article">
    <meta property="og:title" content="JSON Views — Tooltwist">
    <meta property="og:description" content="Tooltwist - A Web Development Platform">
    <meta property="og:image" content="https://http://tooltwist.com///images/logo.png">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="JSON Views — Tooltwist">
    <meta name="twitter:description" content="Tooltwist - A Web Development Platform">
    <meta name="twitter:image" content="https://http://tooltwist.com//images/logo.png">

    <link rel="apple-touch-icon" sizes="57x57" href="/images/icons/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/images/icons/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/images/icons/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/images/icons/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/images/icons/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/images/icons/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/images/icons/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/images/icons/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/icons/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/images/icons/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/images/icons/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/icons/favicon-16x16.png">
    <meta name="msapplication-TileImage" content="/images/icons/ms-icon-144x144.png">
    <link rel="icon" href="/images/logo.png" type="image/png">

    <meta name="msapplication-TileColor" content="#4fc08d">
    <meta name="theme-color" content="#4fc08d">

    <meta name="msapplication-config" content="browserconfig.xml">
    <link rel="manifest" href="/manifest.json">

    <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600|Roboto Mono' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Dosis:500&text=Vue.js' rel='stylesheet' type='text/css'>

    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- main page styles -->
    <link rel="stylesheet" href="/css/page.css">

    <!-- this needs to be loaded before guide's inline scripts -->
    <script src="/js/vue.js"></script>
    <script>
      Vue.config.productionTip = false
      window.PAGE_TYPE = "server"
    </script>

    <!-- ga -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-46852172-1', 'http://tooltwist.com/');
      ga('send', 'pageview');
    </script>

    <!-- vimeo analytics -->
    <script type="text/javascript" defer="defer" src="https://extend.vimeocdn.com/ga/72160148.js"></script>
  </head>
  <body class="docs">
    <div id="mobile-bar" >
      <a class="menu-button"></a>
      <a class="logo" href="/"></a>
    </div>
    <div id="header">
  <a id="logo" href="/">
    <img src="/images/logo.png">
    <span>Tooltwist</span>
  </a>
  <ul id="nav">
    <li>
  <a href="/v2/guide/" class="nav-link">Guide</a>
</li>
<li>
  <a href="/v2/client/" class="nav-link">Client</a>
</li>
<li>
  <a href="/v2/server/" class="nav-link current">Server</a>
</li>
<li>
  <a href="/v2/schema/" class="nav-link">Schema</a>
</li>
<li>
  <a href="/v2/api/" class="nav-link">API</a>
</li>
<!--
<li>
<a href="/v2/examples/" class="nav-link">Examples</a>
</li>
-->

<!--
<li>
  <form id="search-form">
    <input type="text" id="search-query-nav" class="search-query st-default-search-input">
  </form>
</li>
-->



  </ul>
</div>

    
      <div id="main" class="fix-sidebar">
        
          
  <div class="sidebar">
  <div class="sidebar-inner">
    <ul class="main-menu">
      <li>
  <a href="/v2/guide/" class="nav-link">Guide</a>
</li>
<li>
  <a href="/v2/client/" class="nav-link">Client</a>
</li>
<li>
  <a href="/v2/server/" class="nav-link current">Server</a>
</li>
<li>
  <a href="/v2/schema/" class="nav-link">Schema</a>
</li>
<li>
  <a href="/v2/api/" class="nav-link">API</a>
</li>
<!--
<li>
<a href="/v2/examples/" class="nav-link">Examples</a>
</li>
-->

<!--
<li>
  <form id="search-form">
    <input type="text" id="search-query-sidebar" class="search-query st-default-search-input">
  </form>
</li>
-->



    </ul>
    <div class="list">
      
        <h2>
          
          
        </h2>
        <ul class="menu-root">
  
    

    

    
      
        <li><h3>Server</h3></li>
      
    


    <li>
      <a href="/v2/server/index.html" class="sidebar-link">Server Installation</a>
    </li>
  
    

    

    
      
    


    <li>
      <a href="/v2/server/schema.html" class="sidebar-link">Schema</a>
    </li>
  
    

    

    
      
    


    <li>
      <a href="/v2/server/json.html" class="sidebar-link current">JSON Views</a>
    </li>
  
    

    

    
      
    


    <li>
      <a href="/v2/server/deployment.html" class="sidebar-link">Deployment Options</a>
    </li>
  
</ul>

      
    </div>
  </div>
</div>


<div class="content server with-sidebar ">
  
    
      <div id="ad">
</div>

    
  
  
    <h1>JSON Views</h1>
  
  
    <p>So far, all the views we have defined have been mapped to database tables.</p>
<p>Formservice also has the ability to save data in JSON format. This allows arbitrary data to be saved, without needing to be pre-defined, or for additional database tables to be created.</p>
<p>While this provides great flexibility it does have some limitations:</p>
<ol>
<li>In some circumstances queries may run slow.</li>
<li>It does not get the full protections provided by a properly modelled database.</li>
</ol>
<blockquote>
<p>Use JSON format with care. Where applicable it provides great flexibility and can save a LOT of time, but do not be tempted to use it beyond it’s capabilities.</p>
</blockquote>
<p>To define a view as JSON mode, add <code>storeAsJSON: true</code> to the view definition.</p>
<h2 id="The-Key"><a href="#The-Key" class="headerlink" title="The Key"></a>The Key</h2><p>JSON tables will always have a single primary key, named <em>key</em>.</p>
<p>The key can be provided when you insert a new record (i.e. application generated), or it can be automatically generated as follows…</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="string">"order"</span>: &#123;</span><br><span class="line">  storeAsJSON: <span class="literal">true</span>,</span><br><span class="line">  key: <span class="string">'order-&#123;&#123;RANDOM&#125;&#125;'</span>,</span><br><span class="line">  ...</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>In the database many types of JSON are stored together. A prefix like ‘order-‘ makes it easier to recognize data while debugging.</p>
<h2 id="Defining-fields"><a href="#Defining-fields" class="headerlink" title="Defining fields"></a>Defining fields</h2><p>Given that we are storing arbitrary JSON, it may not be possible to know all the data fields at the time the view is being defined. However where possible you should define fields that:</p>
<ul>
<li>will be used as selection criteria.</li>
<li>that reference other views.</li>
<li>the description field.</li>
</ul>
<p>These fields will be indexed, with a maximum of ten fields.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="string">"order"</span>: &#123;</span><br><span class="line">  storeAsJSON: <span class="literal">true</span>,</span><br><span class="line">  key: <span class="string">'order-&#123;&#123;RANDOM&#125;&#125;'</span>,</span><br><span class="line">  fields: &#123;</span><br><span class="line">    comments: <span class="string">"description"</span>,</span><br><span class="line">    order_date: <span class="literal">null</span>,</span><br><span class="line">    customer_id: <span class="literal">null</span>,</span><br><span class="line">    status: <span class="string">'*order_status.status'</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h2 id="Paths"><a href="#Paths" class="headerlink" title="Paths"></a>Paths</h2><p>It is also possible to index nested data within the JSON.</p>
<p>For example, if the order above contains an object named <code>delivery_address</code>, which contains a field <code>street_name</code>, we can define it as a field. This street_name will then be indexed, allowing fast selections by that field.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="string">"order"</span>: &#123;</span><br><span class="line">  storeAsJSON: <span class="literal">true</span>,</span><br><span class="line">  key: <span class="string">"order-&#123;&#123;RANDOM&#125;&#125;"</span>,</span><br><span class="line">  fields: &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="string">"delivery_address.street_name"</span>: <span class="literal">null</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>These “paths” may also contain array references, and follow the same conventions as the <a href="/v2/api/#where">select</a> API.</p>
<h2 id="Re-indexing"><a href="#Re-indexing" class="headerlink" title="Re-indexing"></a>Re-indexing</h2><p>If the order or number of fields is ever changed, the data in the view will need to be re-indexed.</p>
<p>This is done by running <strong><em>TO-BE-CONTINUED</em></strong>.</p>

  
  
  <div class="footer">
      <script src="//m.servedby-buysellads.com/monetization.js" type="text/javascript"></script>
<div class="bsa-cpc"></div>
<script>
  (function(){
    if(typeof _bsa !== 'undefined' && _bsa) {
    _bsa.init('default', 'CKYD62QM', 'placement:vuejsorg', {
      target: '.bsa-cpc',
      align: 'horizontal',
      disable_css: 'true'
    });
      }
  })();
</script>

    Caught a mistake or want to contribute to the documentation?
    <a href="https://github.com/vuejs/vuejs.org/blob/master/src/v2/server/json.md" target="_blank">
      Edit this page on GitHub!
    </a>
  </div>
</div>

        
      </div>
      <script src="/js/smooth-scroll.min.js"></script>
    

    <!-- main custom script for sidebars, version selects etc. -->
    <script src="/js/css.escape.js"></script>
    <script src="/js/common.js"></script>

    <!-- search -->
    <link href="//cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/css/search.css">
    <script src="//cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script>
    <script>
    [
      '#search-query-nav',
      '#search-query-sidebar',
      '#search-query-menu'
    ].forEach(function (selector) {
      if (!document.querySelector(selector)) return
      // search index defaults to v2
      var match = window.location.pathname.match(/^\/(v\d+)/)
      var version = match ? match[1] : 'v2'
      docsearch({
      appId: 'BH4D9OD16A',
      apiKey: '85cc3221c9f23bfbaa4e3913dd7625ea',
      indexName: 'vuejs',
      inputSelector: selector,
      algoliaOptions: { facetFilters: ["version:" + version] }
      })
    })
    </script>

    <!-- fastclick -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
      FastClick.attach(document.body)
    }, false)
    </script>
  </body>
</html>
